# flood

Flood simulator on top of WebGL and Leaflet

数値標高モデル（DEM; Digital Elevation Model) で表現される地形上で水の移動を計算することで、
浸水状態からの水の移動・収束の状況をアニメーションとして可視化するアプリです。

# Demo

* <https://frogcat.github.io/flood/>

# Data

[地理院標高タイルPNG](https://maps.gsi.go.jp/development/demtile.html) を使用しています。
ただし、[Mapbox Terrain-RGB](https://docs.mapbox.com/help/troubleshooting/access-elevation-data/) のような他の PNG DEM を使用することで、世界中で同様のシミュレーションをすることも可能です。

# 解説

1. 表示している地図内の DEM を取得・結合して地形レイヤを作成します
2. クリックをトリガーとして水量レイヤを作成します（現状は全体に同量の水を配置）
3. 時間とともに地形レイヤと水量レイヤからつぎの水量レイヤを計算します
4. 時間とともに水量レイヤが更新されることで、水量の変化がアニメーションとして表示されます


# ToDo 

## 水量レイヤへの干渉

- 現在の降雨データを水量レイヤの初期条件にする（リアルタイムの浸水リスクモニタリング）
- 過去の豪雨時の降雨データを水量レイヤの初期条件にする（ワーストケースからの浸水リスク追体験）
- 常時水が排出されるようなポイントを任意に作成できるようにする（事故のシミュレーション）
- 常時水が吸収されるようなポイントを任意に作成できるようにする（事故対応のシミュレーション）

## 地形レイヤへの干渉

- DEM に対して仮想的に穴を掘ったり土を盛ったりできるようにする


## 水の移動条件のリファイン

- ハザードマップの作成に用いられるような計算式への対応
